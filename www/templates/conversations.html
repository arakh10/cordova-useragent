<ion-view view-title="{{'Messages' | translate}}">
    <ion-content>
        <resource-collection list="conversations">
            <ion-list>
                <ion-item class="item-avatar item-conversation"
                          ng-repeat="conversation in conversations | orderBy:'-lastMessage.dateSent'"
                          href="#/conversations/{{conversation.id}}"
                          ng-class="{'item-positive': conversation.isUnread}"
                        >
                    <img ng-src="{{conversation.withUser.profilePhoto | profilePhotoUrl:conversation.withUser.gender}}">
                    <h2>{{conversation.withUser.nickName}}</h2>
                    <p><i class="icon ion-reply" ng-hide="conversation.lastMessage.id != conversation.ownerId"></i>{{conversation.lastMessage.text || ''}}</p>
                    <ion-option-button class="button-assertive" ng-click="deleteItem(conversation)">
                        <span translate>Delete</span>
                    </ion-option-button>
                </ion-item>
            </ion-list>
        </resource-collection>
    </ion-content>
</ion-view>